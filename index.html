<!doctype><html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Odyssey.js Slides</title>
  <meta name="description" content="Platser med sagor och sägner i Katrineholms kommun.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/x-icon" href="https://cartodb.github.io/odyssey.js/sandbox/favicon.png">
  <link rel="icon" type="image/png" href="https://cartodb.github.io/odyssey.js/sandbox/favicon.png">

  <link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/themes/css/cartodb.css">
  <link rel="stylesheet" href="https://cartodb.github.io/odyssey.js/sandbox/css/slides.css">
  <script src="https://cartodb.github.io/odyssey.js/vendor/modernizr-2.6.2.min.js"></script>
</head>
<body>
  <div id="map" style="width: 100%; height: 100%;"></div>

  <div id="slides_container" style="display:block;">
    <div id="dots"></div>

    <div id="slides"></div>

    <ul id="navButtons">
      <li><a class="prev"></a></li>
      <li><a class="next"></a></li>
    </ul>
  </div>

  <div id="credits">
    <span class="title" id="title">Title</span>
    <span class="author"><strong id="author">By Name using</strong> <a href="http://cartodb.github.io/odyssey.js/">Odyssey.js</a> & <a href="https://github.com/Abbe98/platsr2odyssey-py">Platsr2Odyssey.py</a><span>
  </span></span></div>

  <script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/cartodb.js"></script>
  <script src="https://cartodb.github.io/odyssey.js/dist/odyssey.js" charset="UTF-8"></script>

  <script>
    var resizePID;

    function clearResize() {
      clearTimeout(resizePID);
      resizePID = setTimeout(function() { adjustSlides(); }, 100);
    }

    if (!window.addEventListener) {
      window.attachEvent("resize", function load(event) {
        clearResize();
      });
    } else {
      window.addEventListener("resize", function load(event) {
        clearResize();
      });
    }

    function adjustSlides() {
      var container = document.getElementById("slides_container"),
          slide = document.querySelectorAll('.selected_slide')[0];

      if (slide) {
        if (slide.offsetHeight+169+40+80 >= window.innerHeight) {
          container.style.bottom = "80px";

          var h = container.offsetHeight;

          slide.style.height = h-169+"px";
          slide.classList.add("scrolled");
        } else {
          container.style.bottom = "auto";
          container.style.minHeight = "0";

          slide.style.height = "auto";
          slide.classList.remove("scrolled");
        }
      }
    }

    var resizeAction = O.Action(function() {
      function imageLoaded() {
        counter--;

        if (counter === 0) {
          adjustSlides();
        }
      }
      var images = $('img');
      var counter = images.length;

      images.each(function() {
        if (this.complete) {
          imageLoaded.call( this );
        } else {
          $(this).one('load', imageLoaded);
        }
      });
    });

    function click(el) {
      var element = O.Core.getElement(el);
      var t = O.Trigger();

      // TODO: clean properly
      function click() {
        t.trigger();
      }

      if (element) element.onclick = click;

      return t;
    }

    O.Template({
      init: function() {
        var seq = O.Triggers.Sequential();

        var baseurl = this.baseurl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
        var map = this.map = L.map('map').setView([0, 0.0], 4);
        var basemap = this.basemap = L.tileLayer(baseurl, {
          attribution: 'Map data &copy; <a href="http://openstreetmap.org/">OpenStreetMap</a> contributors.'
        }).addTo(map);

        // enanle keys to move
        O.Keys().on('map').left().then(seq.prev, seq)
        O.Keys().on('map').right().then(seq.next, seq)

        click(document.querySelectorAll('.next')).then(seq.next, seq)
        click(document.querySelectorAll('.prev')).then(seq.prev, seq)

        var slides = O.Actions.Slides('slides');
        var story = O.Story()

        this.story = story;
        this.seq = seq;
        this.slides = slides;
        this.progress = O.UI.DotProgress('dots').count(0);
      },

      update: function(actions) {
        var self = this;

        if (!actions.length) return;

        this.story.clear();

        this._resetActions(actions);
      },

      _resetActions: function(actions) {
        // update footer title and author
        var title_ = actions.global.title === undefined ? '' : actions.global.title,
            author_ = actions.global.author === undefined ? 'Using' : 'By '+actions.global.author+' using';

        document.getElementById('title').innerHTML = title_;
        document.getElementById('author').innerHTML = author_;
        document.title = title_ + " | " + author_ +' Odyssey.js';

        var sl = actions;

        document.getElementById('slides').innerHTML = ''
        this.progress.count(sl.length);

        // create new story
        for(var i = 0; i < sl.length; ++i) {
          var slide = sl[i];
          var tmpl = "<div class='slide' style='diplay:none'>";

          tmpl += slide.html();
          tmpl += "</div>";
          document.getElementById('slides').innerHTML += tmpl;

          this.progress.step(i).then(this.seq.step(i), this.seq)

          var actions = O.Parallel(
            this.slides.activate(i),
            slide(this),
            this.progress.activate(i),
            resizeAction
          );

          actions.on("finish.app", function() {
            adjustSlides();
          });

          this.story.addState(
            this.seq.step(i),
            actions
          )
        }

        this.story.go(this.seq.current());
      },

      changeSlide: function(n) {
        this.seq.current(n);
      }
    });
  </script>

  <script type="text/javascript" src="http://fast.fonts.net/jsapi/3af16084-ba56-49ca-b37d-0b49b59e1927.js"></script>

<script id="md_template" type="text/template">```
-title: "Sagor och sägner: Katrineholm"
-author: "Albin Larsson"
```
#Glysas Grav
```
- center: [58.97228113672633, 16.259854793672311]
- zoom: 15
L.marker([58.97228113672633, 16.259854793672311]).actions.addRemove(S.map)
```
**Glysas grav är en skeppssättning utanför Katrineholm.**
##Skatten vid Glysas grav.
*Av - (Tolkad av Albin Larsson) 
Copyright: Utslocknad upphovsrätt*

Det sägs att jätten Glysa är begravd i skeppssättningen med en silverskål på bröstet. Hon ska ha dött i ett åsknedslag.

 En gång kom två män till graven. De ville söka efter silverskålen. En torsdagsnatt började de gräva under tystnad, för skattsökare får inte prata för då försvinner skatten. Vid midnatt såg de äntligen silverskålen. Just som de skulle ta upp den, fick de syn på en höna, som kom dragande på ett stort hölass. Skattsökarna började skratta. Tystnaden bröts och höna, hölass och silverskålen försvann. Nästa torsdagsnatt gjorde dom två skattsökarna ett nytt försök. Denna gång fick de se två män gå ute på vägen med yxa och huggkubb. De talade med varandra och sa, -Vem tycker du vi ska hugga huvudet av först. Då tyckte de båda skattsökarna att det var bäst att fly. Så silverskålen ligger fortfarande kvar på Glysas bröst.

  


#Skirtorps Sjön
```
- center: [58.968921115251092, 16.27917651674262]
- zoom: 15
L.marker([58.968921115251092, 16.27917651674262]).actions.addRemove(S.map)
```
**Jättens handfat, Vantsjön eller som den idag heter Skirtorps sjön finns det många sägner och historier om. Jätten Glysa ska av misstag gjort sjön och den ska också vara bottenlös...**
##Så ska Vantsjön ha kommit till.
*Av - (Tolkad av Albin Larsson) 
Copyright: Utslocknad upphovsrätt*

Jätten Glysa skulle en gång hämta vatten ur Djulösjön åt sin man som låg sjuk. I brådskan hade Glysa inte något lämpligt att hämta vatten med. Hon fyllde då sin vante med vatten. När hon hunnit till Skirtorp så gick vanten sönder och vattnet rann ut. Så ska Vantskön eller som den idag heter Skirtorps skön ha kommit till.


##Sägen om Skirtorps sjön och Oxkällan.
*Av - (Tolkad av Albin Larsson) 
Copyright: Utslocknad upphovsrätt*

Det berättas, att en oxe en gång gick ner sig i sjön och försvann i djupet. Den återfanns senare Oxkällan längre väster ut längs åsen. Då förstod man att den bottenlösa Skirtorps sjön hade en underjordisk förbindelse med Oxkällan, som fått sitt namn efter denna händelse.


#Gatstuberg
```
- center: [58.97898542051302, 16.225757730255182]
- zoom: 15
L.marker([58.97898542051302, 16.225757730255182]).actions.addRemove(S.map)
```
**Gatstuberg är en plats med många sagor och sägner.**
##Gatstuberg som ättestupa.
*Av Albin Larsson 
Copyright: Creative Commons - Erkännande*

Under vikingatiden trodde man att den som föll i strid eller dog en våldsam död, blev upptagen till gudarna. När man blev gammal och kände krafterna avta, ville man därför gärna gå i döden som hjälte istället för att invänta döden i sin säng.

 Ett sätt var att kasta sig ut för ett högt berg, en ättestupa. Det sägs att Gatstuberg var en sådan ättestupa.


##Trollen i Gatstuberg
*Av Tolkad av Albin Larsson 
Copyright: Creative Commons - Erkännande-Ickekommersiell*

Det berättas att det bodde troll i Gatstuberg förr i tiden. På Stora Djulö bodde på medeltidens slut en herre som hette Pinnauer. Han åkte i väg en juldagsmorgon till Stora Malms kyrka för att vara med på julottan. Han hade bara hunnit till Gatstuberg när han blev tillfångatagen av trollen och införd i berget. I fyra dagar hölls han "bergtagen" men på den fjärde dagen blev han utslängd av trollen. Hans tjänstefolk hittade honom utanför smutsig, trött och med ett brutet finger. Efter denna händelse kallas berget ibland för Pinnaurs berg. 


</script>
</body></html>
